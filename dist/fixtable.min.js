!function(a,b){"function"==typeof define&&define.amd?define("fixtable",[],function(){return a.Fixtable=b()}):"object"==typeof exports?module.exports=b():a.Fixtable=b()}(this,function(){var a;return a=function(){function a(a,b){var c;null==b&&(b=!1);try{this._bindElements(a),this._bindEvents()}catch(d){c=d,console.error("Fixtable requires an element to bind to, e.g. new Fixtable('.fixtable')")}this._DEBUG=b,this._columnWidths=[]}return a.prototype._bindElements=function(a){return this.fixtable=a,this.table=this.fixtable.querySelectorAll("table")[0],this.tableHeader=this.table.querySelectorAll("thead")[0],this.fixtableHeader=this.fixtable.querySelectorAll(".fixtable-header")[0],this.fixtableInner=this.fixtable.querySelectorAll(".fixtable-inner")[0],this.fixtableFilters=this.fixtable.querySelectorAll(".fixtable-filters")[0]},a.prototype._bindEvents=function(){var a;return a=null,window.addEventListener("resize",function(b){return function(){return clearTimeout(a),a=setTimeout(b.setDimensions.bind(b),100)}}(this))},a.prototype._log=function(){var a;if(this._DEBUG)return a=Array.prototype.slice.call(arguments),a.unshift("[fixtable]"),console.log.apply(console,a)},a.prototype._moveStyles=function(a,b){var c,d,e,f,g,h;for(this._log("moving styles from",a,"to",b),h=["margin-top","margin-right","margin-bottom","margin-left","padding-top","padding-right","padding-bottom","padding-left","border-top-color","border-top-style","border-top-width","border-right-color","border-right-style","border-right-width","border-bottom-color","border-bottom-style","border-bottom-width","border-left-color","border-left-style","border-left-width"],c=window.getComputedStyle(a),f=[],d=0,e=h.length;e>d;d++)g=h[d],b.style[g]=c.getPropertyValue(g),f.push(a.style[g]="0");return f},a.prototype._getColumnHeaderMaxHeight=function(){var a,b;return b="tr.fixtable-column-headers th > div",a=[].slice.call(this.tableHeader.querySelectorAll(b)),Math.max.apply(null,a.map(function(a){return a.offsetHeight}))},a.prototype._getColumnFilterMaxHeight=function(){var a,b;return b="tr.fixtable-column-filters th > div",a=[].slice.call(this.tableHeader.querySelectorAll(b)),Math.max.apply(null,a.map(function(a){return a.offsetHeight}))},a.prototype._setColumnHeaderWidths=function(){var a,b,c,d,e,f;for(f="tr.fixtable-column-headers th > div",b=this.tableHeader.querySelectorAll(f),e=[],c=0,d=b.length;d>c;c++)a=b[c],e.push(a.style.width=a.parentNode.offsetWidth+"px");return e},a.prototype._setColumnFilterWidths=function(){var a,b,c,d,e,f;for(f="tr.fixtable-column-filters th > div",b=this.tableHeader.querySelectorAll(f),e=[],c=0,d=b.length;d>c;c++)a=b[c],e.push(a.style.width=a.parentNode.offsetWidth+"px");return e},a.prototype._setFixtablePadding=function(){var a,b;return b=this.fixtableHeader.offsetHeight+this.fixtableFilters.offsetHeight,this.fixtable.style.paddingTop=b+"px",(a=this.fixtable.querySelectorAll(".fixtable-footer")[0])?this.fixtable.style.paddingBottom=a.offsetHeight+"px":void 0},a.prototype._setHeaderHeight=function(){var a;return a=this._getColumnHeaderMaxHeight()+"px",this.fixtableHeader.style.height=a},a.prototype._setFiltersHeight=function(){var a,b,c,d,e,f,g,h;for(c=this._getColumnFilterMaxHeight()+"px",d=this.fixtableHeader.style.height,this.fixtableFilters&&(this.fixtableFilters.style.paddingTop=c,this.fixtableFilters.style.top=d),h="tr.fixtable-column-filters th > div",b=this.tableHeader.querySelectorAll(h),g=[],e=0,f=b.length;f>e;e++)a=b[e],g.push(a.style.top=d);return g},a.prototype._tableIsRendered=function(){var a,b;return b="tr.fixtable-column-headers th > div",a=this.fixtable.querySelectorAll(b),a.length&&a[0].offsetHeight},a.prototype._checkColumnWidthsSet=function(){var a,b,c,d,e;for(e=this._columnWidths,c=b=0,d=e.length;d>b;c=++b)if(a=e[c],a&&!a.set)return!1;return!0},a.prototype._retrySetColumnWidths=function(){var a,b,c,d,e,f;for(e=this._columnWidths,f=[],c=b=0,d=e.length;d>b;c=++b)a=e[c],a&&f.push(a.set?void 0:this.setColumnWidth(c,a.width));return f},a.prototype.moveTableStyles=function(a){var b,c,d,e,f,g,h,i,j,k;if(null==a&&(a=0),!(++a>10)){if(this._log("attempt",a,"of 10 to move table styles"),!this._tableIsRendered())return this._log("table not yet rendered; will try again momentarily"),setTimeout(function(b){return function(){return b.moveTableStyles(a)}}(this),0);if(!this._stylesCirculated){for(this.fixtable.className+=" fixtable-styles-circulated",this._stylesCirculated=!0,this._moveStyles(this.table,this.fixtable),k="tr.fixtable-column-headers th > div",d=this.tableHeader.querySelectorAll(k),f=0,h=d.length;h>f;f++)c=d[f],this._moveStyles(c.parentNode,c);for(k="tr.fixtable-column-filters th",e=this.tableHeader.querySelectorAll(k),j=[],g=0,i=e.length;i>g;g++)b=e[g],b.style.margin="0",b.style.padding="0",j.push(b.style.border="0");return j}}},a.prototype.scrollTop=function(){return this.fixtableInner.scrollTop=0},a.prototype.setColumnWidth=function(a,b,c){var d,e;return null==c&&(c=0),this._columnWidths[a]={width:b,set:!1},++c>10?void 0:(this._log("attempt",c,"of 10 to set width of column",a),this._tableIsRendered()?(e="th:nth-of-type("+a+")",d=this.tableHeader.querySelectorAll(e)[0],"number"==typeof b&&(b=parseInt(b)+"px"),this._log("setting width of column",a,"to",b),d.style.width=b,this._columnWidths[a].set=!0,this.table.style.tableLayout="fixed"):(this._log("table not yet rendered; will try again momentarily"),setTimeout(function(d){return function(){return d.setColumnWidth(a,b,c)}}(this),1)))},a.prototype.setDimensions=function(a){return null==a&&(a=0),++a>10?void 0:(this._log("attempt",a,"of 10 to set dimensions"),this._stylesCirculated&&this._checkColumnWidthsSet()&&this._tableIsRendered()?(this._log("proceeding to set dimensions"),this._setColumnHeaderWidths(),this._setHeaderHeight(),this._setColumnFilterWidths(),this._setFiltersHeight(),this._setFixtablePadding()):(this.moveTableStyles(),this._retrySetColumnWidths(),this._log("table styles / column widths not yet done; will try again momentarily"),setTimeout(function(b){return function(){return b.setDimensions(a)}}(this),1)))},a}()});